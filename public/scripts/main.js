function setupPlayerOption(){function o(){var o=Math.floor(3*Math.random())+1,e=Math.floor(3*Math.random())+1,r=document.querySelector("#r"+o+"c"+e);r.classList.add("x")}var e=function(){console.log("inside player choice"),bot=this.classList.contains("x")?"o":"x",player="x"===bot?"o":"x",console.log("bot:"+bot+";player:"+player),"x"===bot&&o()},r=document.querySelectorAll(".player");r[0].onclick=e,r[1].onclick=e}function setupPlayerInput(){function o(o,e){console.log("patterns: "+e);for(var t=!1,n=0;n<3;n++){var l=o[0][n]+o[1][n]+o[2][n];e.includes(o[n])?(c=o[n].indexOf("b")+1,r=n+1,t=[r,c]):e.includes(l)&&(r=l.indexOf("b")+1,c=n+1,t=[r,c])}if(t)return console.log("row/col result:"+t),t;var a=o[0][0]+o[1][1]+o[2][2],s=o[0][2]+o[1][1]+o[2][0];if(console.log("diag1:"+a+";diag2:"+s),e.includes(a)){var i=a.indexOf("b");r=i+1,c=i+1,t=[r,c]}else if(e.includes(s)){var i=s.indexOf("b");c=3-i,r=i+1,t=[r,c]}return console.log("after diagonal check result:"+t),t}function e(o){for(var e=0;e<3;e++){var r=o[0][e]+o[1][e]+o[2][e];if("xxx"===o[e])return"x";if("ooo"===o[e])return"o";if("xxx"===r)return"x";if("ooo"===r)return"o"}var t=o[0][0]+o[1][1]+o[2][2],n=o[0][2]+o[1][1]+o[2][0];return"xxx"===t||"xxx"===n?"x":("ooo"===t||"ooo  "===n)&&"o"}function t(){for(var o=[],e=1;e<4;e++){for(var r="",t=1;t<4;t++){var n=document.querySelector("#r"+e+"c"+t);r+=n.classList.contains("x")?"x":n.classList.contains("o")?"o":"b"}o.push(r)}return console.log(o),o}for(var n=document.querySelectorAll(".game button"),l=function(){var r=t(),n=e(r);n||this.classList.contains("x")||this.classList.contains("o")||this.classList.add(player),r=t(),n=e(r),console.log(n);var l=[bot+bot+"b",bot+"b"+bot,"b"+bot+bot],c=[player+player+"b",player+"b"+player,"b"+player+player],a=o(r,l);if(console.log("fill "+a+" to win."),a){var s=document.querySelector("#r"+a[0]+"c"+a[1]);s.classList.add(bot)}if(r=t(),n=e(r),console.log("winner:"+n),a=o(r,c),console.log("fill "+a+" to defend"),a){var s=document.querySelector("#r"+a[0]+"c"+a[1]);s.classList.add(bot)}},a=0;a<n.length;a++)n[a].onclick=l}var player="b",bot="b";document.addEventListener("DOMContentLoaded",function(o){setupPlayerOption(),setupPlayerInput()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsic2V0dXBQbGF5ZXJPcHRpb24iLCJmaXJzdE1vdmUiLCJyIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiYyIsInJhbmQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjbGFzc0xpc3QiLCJhZGQiLCJwbGF5ZXJDaG9pY2UiLCJjb25zb2xlIiwibG9nIiwiYm90IiwidGhpcyIsImNvbnRhaW5zIiwicGxheWVyIiwicGxheWVyT3B0aW9ucyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJvbmNsaWNrIiwic2V0dXBQbGF5ZXJJbnB1dCIsImZpbGwiLCJwb3NpdGlvbnMiLCJwYXR0ZXJucyIsInJlc3VsdCIsImkiLCJjb2x1bW4iLCJpbmNsdWRlcyIsImluZGV4T2YiLCJkaWFnMSIsImRpYWcyIiwiaW5kZXgiLCJnZXRXaW5uZXIiLCJnZXRHYW1lUG9zaXRpb25zIiwiZ2FtZVBvc2l0aW9ucyIsInJvdyIsImoiLCJwb3NpdGlvbiIsInB1c2giLCJidXR0b25zIiwiYnV0dG9uQ2xpY2tIYW5kbGVyIiwid2lubmVyIiwid2luUGF0dGVybnMiLCJkZWZlbmNlUGF0dGVybnMiLCJuZXh0IiwibmV4dEJsb2NrIiwibGVuZ3RoIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiXSwibWFwcGluZ3MiOiJBQWdCQSxRQUFTQSxxQkFVUCxRQUFTQyxLQUNQLEdBQUlDLEdBQUVDLEtBQUtDLE1BQW9CLEVBQWRELEtBQUtFLFVBQVksRUFDOUJDLEVBQUVILEtBQUtDLE1BQW9CLEVBQWRELEtBQUtFLFVBQVksRUFDOUJFLEVBQUtDLFNBQVNDLGNBQWMsS0FBTVAsRUFBSSxJQUFLSSxFQUMvQ0MsR0FBS0csVUFBVUMsSUFBSSxLQWJyQixHQUFJQyxHQUFhLFdBQ2ZDLFFBQVFDLElBQUksd0JBQ1pDLElBQUtDLEtBQUtOLFVBQVVPLFNBQVMsS0FBUSxJQUFNLElBQzNDQyxPQUFjLE1BQU5ILElBQWEsSUFBTSxJQUMzQkYsUUFBUUMsSUFBSSxPQUFTQyxJ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QUtOLFVBQVVDLElBQUlPLFFBQ3JCTSxFQUFVVyxJQUNWUSxFQUFPVCxFQUFVVixHQUVqQlgsUUFBUUMsSUFBSTZCLEVBRVosSUFBSUMsSUFBYTdCLElBQUlBLElBQUksSUFBSUEsSUFBSSxJQUFJQSxJQUFJLElBQUlBLElBQUlBLEtBQzdDOEIsR0FBaUIzQixPQUFPQSxPQUFPLElBQUlBLE9BQU8sSUFBSUEsT0FBTyxJQUFJQSxPQUFPQSxRQUdoRTRCLEVBQUt2QixFQUFLQyxFQUFVb0IsRUFFeEIsSUFEQS9CLFFBQVFDLElBQUksUUFBVWdDLEVBQU8sWUFDMUJBLEVBQUssQ0FDTixHQUFJQyxHQUFVdkMsU0FBU0MsY0FBYyxLQUFLcUMsRUFBSyxHQUFHLElBQUlBLEVBQUssR0FDM0RDLEdBQVVyQyxVQUFVQyxJQUFJSSxLQVMxQixHQVBBUyxFQUFVVyxJQUNWUSxFQUFPVCxFQUFVVixHQUNqQlgsUUFBUUMsSUFBSSxVQUFVNkIsR0FHdEJHLEVBQUt2QixFQUFLQyxFQUFVcUIsR0FDcEJoQyxRQUFRQyxJQUFJLFFBQVVnQyxFQUFPLGNBQzFCQSxFQUFLLENBQ04sR0FBSUMsR0FBVXZDLFNBQVNDLGNBQWMsS0FBS3FDLEVBQUssR0FBRyxJQUFJQSxFQUFLLEdBQzNEQyxHQUFVckMsVUFBVUMsSUFBSUksT0ErRnBCWSxFQUFFLEVBQUVBLEVBQUVjLEVBQVFPLE9BQU9yQixJQUMzQmMsRUFBUWQsR0FBR04sUUFBUXFCLEVBcEtyQixHQUFJeEIsUUFBTyxJQUNQSCxJQUFJLEdBQ1ZQLFVBQVN5QyxpQkFBaUIsbUJBQW1CLFNBQVNDLEdBT3BEbEQsb0JBQ0FzQiIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gICogd2FpdCB1bnRpbCB0aGUgZG9jIGlzIHJlYWR5IHRvIG9iZXkgb3JkZXJzXG4gICovXG4gIHZhciBwbGF5ZXI9XCJiXCI7XG4gIHZhciBib3Q9XCJiXCI7XG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLGZ1bmN0aW9uKGUpe1xuICAvKipcbiAgICAqIG9uY2UgY29udGVudCBpcyBsb2FkZWRcbiAgICAqIGJpbmQgc2xpZGVyIGZ1bmN0aW9uYWxpdHkgLSB0byB1cGRhdGUgdGV4dCBib3hcbiAgICAqIGJpbmQgdGV4dCBib3ggZnVuY3Rpb25hbGl0eSAtIHRvIHVwZGF0ZSBzbGlkZXJcbiAgICAqIGJpbmQgYnV0dG9uIGNsaWNrIHRvIHN0YXJ0L3N0b3AgY2xvY2tcbiAgICAqL1xuICBzZXR1cFBsYXllck9wdGlvbigpO1xuICBzZXR1cFBsYXllcklucHV0KCk7XG59KTtcblxuZnVuY3Rpb24gc2V0dXBQbGF5ZXJPcHRpb24oKXtcbiAgdmFyIHBsYXllckNob2ljZT1mdW5jdGlvbigpe1xuICAgIGNvbnNvbGUubG9nKFwiaW5zaWRlIHBsYXllciBjaG9pY2VcIik7XG4gICAgYm90PSh0aGlzLmNsYXNzTGlzdC5jb250YWlucyhcInhcIikpID8gXCJvXCIgOiBcInhcIjtcbiAgICBwbGF5ZXI9KGJvdD09PVwieFwiKSA/IFwib1wiIDogXCJ4XCI7XG4gICAgY29uc29sZS5sb2coXCJib3Q6XCIgKyBib3QgKyBcIjtwbGF5ZXI6XCIgKyBwbGF5ZXIpO1xuICAgIGlmKGJvdD09PVwieFwiKVxuICAgICAgZmlyc3RNb3ZlKCk7XG4gIH07XG5cbiAgZnVuY3Rpb24gZmlyc3RNb3ZlKCl7XG4gICAgdmFyIHI9TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjMpKzE7XG4gICAgdmFyIGM9TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjMpKzE7XG4gICAgdmFyIHJhbmQ9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNyXCIrIHIgKyBcImNcIiArYyk7XG4gICAgcmFuZC5jbGFzc0xpc3QuYWRkKFwieFwiKTtcbiAgfTtcblxuICB2YXIgcGxheWVyT3B0aW9ucz1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucGxheWVyJyk7XG4gIHBsYXllck9wdGlvbnNbMF0ub25jbGljaz1wbGF5ZXJDaG9pY2U7XG4gIHBsYXllck9wdGlvbnNbMV0ub25jbGljaz1wbGF5ZXJDaG9pY2U7XG5cbn1cblxuZnVuY3Rpb24gc2V0dXBQbGF5ZXJJbnB1dCgpe1xuICB2YXIgYnV0dG9ucz1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmdhbWUgYnV0dG9uXCIpO1xuICB2YXIgYnV0dG9uQ2xpY2tIYW5kbGVyPWZ1bmN0aW9uKCl7XG4gICAgdmFyIHBvc2l0aW9ucz1nZXRHYW1lUG9zaXRpb25zKCk7XG4gICAgdmFyIHdpbm5lcj1nZXRXaW5uZXIocG9zaXRpb25zKTtcbiAgICAvLyBkbyBub3RoaW5nIGlmIHRoZSBibG9jayBhbHJlYWR5IGhhcyB4IG9yIG8gKGFuZCB0aGUgZ2FtZSBpcyBzdGlsbCBvbilcbiAgICBpZighd2lubmVyICYmICF0aGlzLmNsYXNzTGlzdC5jb250YWlucyhcInhcIikgJiYgIXRoaXMuY2xhc3NMaXN0LmNvbnRhaW5zKFwib1wiKSlcbiAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZChwbGF5ZXIpO1xuICAgIHBvc2l0aW9ucz1nZXRHYW1lUG9zaXRpb25zKCk7IC8vZ2V0IHBvc2l0aW9ucyBhZ2FpbiwgYmFzZWQgb24gbGFzdCB1c2VyIGlucHV0XG4gICAgd2lubmVyPWdldFdpbm5lcihwb3NpdGlvbnMpO1xuXG4gICAgY29uc29sZS5sb2cod2lubmVyKTtcblxuICAgIHZhciB3aW5QYXR0ZXJucz1bYm90K2JvdCtcImJcIixib3QrXCJiXCIrYm90LFwiYlwiK2JvdCtib3RdO1xuICAgIHZhciBkZWZlbmNlUGF0dGVybnM9W3BsYXllcitwbGF5ZXIrXCJiXCIscGxheWVyK1wiYlwiK3BsYXllcixcImJcIitwbGF5ZXIrcGxheWVyXTtcblxuICAgIC8vdHJ5IHRvIHdpbiBmaXJzdFxuICAgIHZhciBuZXh0PWZpbGwocG9zaXRpb25zLHdpblBhdHRlcm5zKTtcbiAgICBjb25zb2xlLmxvZyhcImZpbGwgXCIgKyBuZXh0ICsgXCIgdG8gd2luLlwiKTtcbiAgICBpZihuZXh0KXtcbiAgICAgIHZhciBuZXh0QmxvY2s9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNyXCIrbmV4dFswXStcImNcIituZXh0WzFdKTtcbiAgICAgIG5leHRCbG9jay5jbGFzc0xpc3QuYWRkKGJvdCk7XG4gICAgfVxuICAgIHBvc2l0aW9ucz1nZXRHYW1lUG9zaXRpb25zKCk7XG4gICAgd2lubmVyPWdldFdpbm5lcihwb3NpdGlvbnMpO1xuICAgIGNvbnNvbGUubG9nKFwid2lubmVyOlwiK3dpbm5lcik7XG5cbiAgICAvL3NlY29uZCBpcyB0byB0cnkgYW5kIGRlZmVuZFxuICAgIG5leHQ9ZmlsbChwb3NpdGlvbnMsZGVmZW5jZVBhdHRlcm5zKTtcbiAgICBjb25zb2xlLmxvZyhcImZpbGwgXCIgKyBuZXh0ICsgXCIgdG8gZGVmZW5kXCIpO1xuICAgIGlmKG5leHQpe1xuICAgICAgdmFyIG5leHRCbG9jaz1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3JcIituZXh0WzBdK1wiY1wiK25leHRbMV0pO1xuICAgICAgbmV4dEJsb2NrLmNsYXNzTGlzdC5hZGQoYm90KTtcbiAgICB9XG4gICAgLy90aGlyZCwgc3RyYXRlZ2ljIGZpbGwgd2hlbiB0aGUgZ2FtZSBpcyBlYXJseVxuICAgIC8vI1RPRE86IHN0cmF0ZWdpYyBmaWxsXG4gIH07XG4gIC8qKlxuICAgICogVHJ5IHRvIHdpbiBmaXJzdCAobG9vayBmb3IgdHdvIGNvbnNlY3V0aXZlIGJvdCBvcHRpb25zIGFuZCBmaWxsIGluIHRoZSB0aGlyZClcbiAgICAqL1xuICBmdW5jdGlvbiBmaWxsKHBvc2l0aW9ucyxwYXR0ZXJucyl7XG4gICAgLy9sb29rIGZvciBjb21wbGV0ZWQgcm93cyBvciBjb2x1bW5zIGluIHBvc2l0aW9uc1xuICAgIC8vcmV0dXJuIHRoZSB3aW5uZXIgaWYgZm91bmRcbiAgICBjb25zb2xlLmxvZyhcInBhdHRlcm5zOiBcIiArIHBhdHRlcm5zKTtcbiAgICB2YXIgcmVzdWx0PWZhbHNlO1xuICAgIGZvcih2YXIgaT0wO2k8MztpKyspe1xuICAgICAgdmFyIGNvbHVtbj1wb3NpdGlvbnNbMF1baV0rcG9zaXRpb25zWzFdW2ldK3Bvc2l0aW9uc1syXVtpXTtcblxuICAgICAgaWYocGF0dGVybnMuaW5jbHVkZXMocG9zaXRpb25zW2ldKSl7XG4gICAgICAgIGM9cG9zaXRpb25zW2ldLmluZGV4T2YoXCJiXCIpKzE7XG4gICAgICAgIHI9aSsxO1xuICAgICAgICByZXN1bHQ9IFtyLGNdO1xuICAgICAgfSBlbHNlIGlmKHBhdHRlcm5zLmluY2x1ZGVzKGNvbHVtbikpe1xuICAgICAgICByPWNvbHVtbi5pbmRleE9mKFwiYlwiKSsxO1xuICAgICAgICBjPWkrMTtcbiAgICAgICAgcmVzdWx0PSBbcixjXTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYocmVzdWx0KXtcbiAgICAgIGNvbnNvbGUubG9nKFwicm93L2NvbCByZXN1bHQ6XCIgKyByZXN1bHQpO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgLy9jaGVjayBmb3IgY29tcGxldGVkIHBvc2l0aW9ucyBkaWFnb25hbGx5XG4gICAgdmFyIGRpYWcxPXBvc2l0aW9uc1swXVswXStwb3NpdGlvbnNbMV1bMV0rcG9zaXRpb25zWzJdWzJdO1xuICAgIHZhciBkaWFnMj1wb3NpdGlvbnNbMF1bMl0rcG9zaXRpb25zWzFdWzFdK3Bvc2l0aW9uc1syXVswXTtcbiAgICBjb25zb2xlLmxvZyhcImRpYWcxOlwiK2RpYWcxK1wiO2RpYWcyOlwiK2RpYWcyKTtcbiAgICBpZihwYXR0ZXJucy5pbmNsdWRlcyhkaWFnMSkpe1xuICAgICAgdmFyIGluZGV4PWRpYWcxLmluZGV4T2YoXCJiXCIpO1xuICAgICAgcj1pbmRleCsxO1xuICAgICAgYz1pbmRleCsxO1xuICAgICAgcmVzdWx0PSBbcixjXTtcbiAgICB9IGVsc2UgaWYocGF0dGVybnMuaW5jbHVkZXMoZGlhZzIpKXtcbiAgICAgIHZhciBpbmRleD1kaWFnMi5pbmRleE9mKFwiYlwiKTtcbiAgICAgIGM9My1pbmRleDtcbiAgICAgIHI9aW5kZXgrMTtcbiAgICAgIHJlc3VsdD0gW3IsY107XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKFwiYWZ0ZXIgZGlhZ29uYWwgY2hlY2sgcmVzdWx0OlwiICsgcmVzdWx0KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIGZ1bmN0aW9uIGdldFdpbm5lcihwb3NpdGlvbnMpe1xuICAgIC8vbG9vayBmb3IgY29tcGxldGVkIHJvd3Mgb3IgY29sdW1ucyBpbiBwb3NpdGlvbnNcbiAgICAvL3JldHVybiB0aGUgd2lubmVyIGlmIGZvdW5kXG4gICAgZm9yKHZhciBpPTA7aTwzO2krKyl7XG4gICAgICB2YXIgY29sdW1uPXBvc2l0aW9uc1swXVtpXStwb3NpdGlvbnNbMV1baV0rcG9zaXRpb25zWzJdW2ldO1xuICAgICAgaWYocG9zaXRpb25zW2ldPT09XCJ4eHhcIil7XG4gICAgICAgIHJldHVybiBcInhcIjtcbiAgICAgIH0gZWxzZSBpZihwb3NpdGlvbnNbaV09PT1cIm9vb1wiKXtcbiAgICAgICAgcmV0dXJuIFwib1wiO1xuICAgICAgfSBlbHNlIGlmKGNvbHVtbj09PVwieHh4XCIpIHtcbiAgICAgICAgcmV0dXJuIFwieFwiO1xuICAgICAgfSBlbHNlIGlmKGNvbHVtbj09PVwib29vXCIpe1xuICAgICAgICByZXR1cm4gXCJvXCI7XG4gICAgICB9XG4gICAgfVxuICAgIC8vY2hlY2sgZm9yIGNvbXBsZXRlZCBwb3NpdGlvbnMgZGlhZ29uYWxseVxuICAgIHZhciBkaWFnMT1wb3NpdGlvbnNbMF1bMF0rcG9zaXRpb25zWzFdWzFdK3Bvc2l0aW9uc1syXVsyXTtcbiAgICB2YXIgZGlhZzI9cG9zaXRpb25zWzBdWzJdK3Bvc2l0aW9uc1sxXVsxXStwb3NpdGlvbnNbMl1bMF07XG4gICAgaWYoZGlhZzE9PT1cInh4eFwiIHx8IGRpYWcyPT09XCJ4eHhcIil7XG4gICAgICByZXR1cm4gXCJ4XCI7XG4gICAgfWVsc2UgaWYoZGlhZzE9PT1cIm9vb1wiIHx8IGRpYWcyPT09XCJvb28gIFwiKXtcbiAgICAgIHJldHVybiBcIm9cIjtcbiAgICB9ZWxzZXtcbiAgICAgIHJldHVybiBmYWxzZTsgLy9yZXR1cm4gZmFsc2UgaWYgbm8tb25lIGhhcyB3b25cbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gZ2V0R2FtZVBvc2l0aW9ucygpe1xuICAgIHZhciBnYW1lUG9zaXRpb25zPVtdO1xuICAgIGZvcih2YXIgaT0xO2k8NDtpKyspe1xuICAgICAgdmFyIHJvdz1cIlwiO1xuICAgICAgZm9yKHZhciBqPTE7ajw0O2orKyl7XG4gICAgICAgIHZhciBwb3NpdGlvbj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3JcIiArIGkgKyBcImNcIiArIGopO1xuICAgICAgICBpZihwb3NpdGlvbi5jbGFzc0xpc3QuY29udGFpbnMoXCJ4XCIpKVxuICAgICAgICAgIHJvdys9XCJ4XCI7XG4gICAgICAgIGVsc2UgaWYocG9zaXRpb24uY2xhc3NMaXN0LmNvbnRhaW5zKFwib1wiKSlcbiAgICAgICAgICByb3crPVwib1wiO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgcm93Kz1cImJcIjtcbiAgICAgIH1cbiAgICAgIGdhbWVQb3NpdGlvbnMucHVzaChyb3cpO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZyhnYW1lUG9zaXRpb25zKTtcbiAgICByZXR1cm4gZ2FtZVBvc2l0aW9ucztcbiAgfTtcblxuICBmb3IodmFyIGk9MDtpPGJ1dHRvbnMubGVuZ3RoO2krKyl7XG4gICAgYnV0dG9uc1tpXS5vbmNsaWNrPWJ1dHRvbkNsaWNrSGFuZGxlcjtcbiAgfVxuXG59XG4iXX0=
